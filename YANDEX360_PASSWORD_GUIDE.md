# Как создать пароль приложения для Яндекс 360

## ⚠️ ВАЖНО
Для SMTP нужен **пароль приложения**, а НЕ основной пароль от почты!

## Пошаговая инструкция

### Шаг 1: Войдите в Яндекс 360

1. Откройте https://360.yandex.ru/
2. Войдите в аккаунт, где создан ящик `no-reply@uchiteltut.ru`

### Шаг 2: Откройте настройки безопасности

**Вариант А (через Яндекс ID):**
1. Перейдите на https://id.yandex.ru/security
2. Войдите, если потребуется

**Вариант Б (через почту):**
1. Откройте почту https://mail.yandex.ru/
2. Нажмите на аватар (правый верхний угол)
3. Выберите "Аккаунт" или "Настройки"
4. Перейдите в раздел "Безопасность"

### Шаг 3: Найдите раздел "Пароли приложений"

1. В настройках безопасности найдите раздел **"Пароли приложений"**
2. Он может быть в подразделе "Двухфакторная аутентификация" или отдельно

### Шаг 4: Создайте новый пароль приложения

1. Нажмите кнопку **"Создать новый пароль"** или **"Создать пароль приложения"**
2. Выберите тип приложения:
   - Выберите **"Почта"** или **"Другое"**
   - Если выбрали "Другое", введите название: `SMTP для uchiteltut.ru`
3. Нажмите **"Создать"**

### Шаг 5: Скопируйте пароль

⚠️ **ВНИМАНИЕ**: Пароль показывается **только один раз**!

1. Скопируйте созданный пароль (он будет выглядеть как строка из букв и цифр, например: `abcdefghijklmnop`)
2. **Сохраните его в безопасном месте** - вы больше не сможете его увидеть!

### Шаг 6: Используйте пароль в настройках

Вставьте скопированный пароль в переменную окружения:

```env
SMTP_PASS=скопированный_пароль_приложения
```

## Альтернативный способ (если не видите "Пароли приложений")

Если в настройках нет раздела "Пароли приложений", возможно нужно:

1. **Включить двухфакторную аутентификацию (2FA):**
   - В настройках безопасности включите 2FA
   - После этого появится раздел "Пароли приложений"

2. **Или используйте прямой URL:**
   - https://id.yandex.ru/security/app-passwords
   - (может потребоваться авторизация)

## Проверка

После настройки пароля приложения:

1. Убедитесь, что в `.env` файле указан именно **пароль приложения**, а не основной пароль
2. Перезапустите сервер
3. Попробуйте отправить тестовый отклик
4. Проверьте логи сервера - должно быть сообщение `SMTP connection verified`

## Если что-то не получается

### Проблема: Не вижу раздел "Пароли приложений"

**Решение:**
- Включите двухфакторную аутентификацию (2FA)
- Или используйте прямой доступ: https://id.yandex.ru/security/app-passwords

### Проблема: Пароль не работает

**Проверьте:**
1. ✅ Используете пароль приложения, а не основной пароль
2. ✅ Скопировали пароль полностью (без пробелов)
3. ✅ Email ящика правильный: `no-reply@uchiteltut.ru`
4. ✅ Домен верифицирован в Яндекс 360

### Проблема: Ошибка "Invalid login"

**Возможные причины:**
- Используется основной пароль вместо пароля приложения
- Пароль скопирован с лишними пробелами
- Email указан неправильно

**Решение:**
- Создайте новый пароль приложения
- Убедитесь, что копируете его полностью
- Проверьте, что в `.env` нет лишних пробелов

## Визуальная подсказка

Пароль приложения выглядит примерно так:
```
abcdefghijklmnop
```
или
```
abcd-efgh-ijkl-mnop
```

Это НЕ ваш обычный пароль от почты!

## Безопасность

- ✅ Пароли приложений можно создавать несколько (для разных сервисов)
- ✅ Каждый пароль можно удалить отдельно
- ✅ Если пароль скомпрометирован, удалите его и создайте новый
- ✅ Не храните пароли приложений в открытом виде

